---
종류: 문헌
날짜: 2023-09-05
인물_저자: 윤성우
태그: 프로그래밍,네트워크
출처: 윤성우의 열혈 TCP IP 소켓 프로그래밍
구분_장소_분류: ""
aliases: []
---

### 날짜: 2023-09-05 20:12
### 태그: #프로그래밍/네트워크

>[!메모]
> 

### 학습 내용
---
## select 함수의 이해와 서버의 구현
### 멀티플렉싱
- 정의
	- 하나의 통신채널을 통해서 둘 이상의 데이터(시그널)를 전송하는 데 사용되는 기술.
	- 물리적 장치의 효율을 높이기 위해 최소한의 물리적 요소만 사용하여 최대한의 데이터를 전달하기 위해 사용되는 기술.
### select()
```c++
int select(int maxfd, fd_set *readset, fd_set *exceptset, const struct timeval *timeout);
```
- maxfd
	- 검사 대상이 되는 파일 디스크립터 수
- readset
	- fd_set 변수에 '**수신된 데이터의 존재여부**'에 관심있는 파일 디스크립터 정보를 등록하여 `fd_set *`을 전달.
- writeset
	- fd_set 변수에 '**블로킹 없는 데이터 전송의 가능여부**'에 관심있는 파일 디스크립터 정보를 등록하여 `fd_set *`을 전달.
- exceptset
	- fd_set 변수에 '**예외상황의 발생여부**'에 관심있는 파일 디스크립터 정보를 등록하여 `fd_set *`을 전달.
- timeout
	- select 함수 호출 이후 무한정 블로킹 상태에 빠지지 않도록 time-out을 설정하기 위한 인자를 전달.
- 반환 값
	- 오류: -1
	- 타임아웃: 0
	- 관심 대상의 파일 디스크립터의 변화 감지: 해당 파일 디스크립터
- 한 곳에 여러 개의 파일 디스크립터를 모아놓고 동시에 관찰할 수 있다.
	- **수신한 데이터**를 지니고 있는 소켓
	- **블로킹되지 않고 데이터의 전송**이 가능한 소켓
	- **예외상황**이 발생한 소켓
### **3 step**
1. 스텝 1
	- 파일 디스크립터 설정
	- 검사 범위 지정
	- 타임아웃 설정
2. 스텝 2
	- select 함수 호출
3. 스텝 3	
	- 호출결과 확인
### 파일 디스크립터 설정
- select 함수로 이벤트를 감지할 소켓을 모아야함.
	- **수신, 전송, 예외**
	- fd_set 자료형의 변수를 사용한다.
- fd_set
![[Pasted image 20230905205349.png]]
- 배열의 인덱스: fd
- 각 인덱스의 값: 관찰 대상 여부(true / false)
- 예제에서는 fd 1과 3이 관찰대상으로 지정되어 있다.
- fd_set의 설정을 돕는 매크로 함수
```c++
/* fd_set형 변수의 비트를 모두 0으로 초기화*/
FD_ZERO(fd_set *fdset);
/* fdset으로 전달된 주소의 변수에 매개변수 fd로 전달된 파일 디스크립터 정보를 등록한다 */
FD_SET(int fd, fd_set *fdset);
/* fdset으로 전달된 주소의 변수에 매개변수 fd로 전달된 파일 디스크립터 정보를 삭제한다 */
FD_CLR(int fd, fd_set *fdset);
/* fdset으로 전달된 주소의 변수에 매개변수 fd로 전달된 파일 디스크립터 정보가 있으면 양수를 반환한다 */
FD_ISSET(int fd, fd_set *fdset);
```

---
### 생각 (파생된 질문/생각)
- 
### 출 처
- 윤성우의 열혈 TCP IP 소켓 프로그래밍

### 연결 문서: {연결 이유}
- 